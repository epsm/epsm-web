<%@ page language="java" contentType="text/html; charset=utf-8 pageEncoding="utf-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="s" %>

<!DOCTYPE html>
<html>
    <head>
        <title>Model state</title>
        <link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/resources/css/model_state.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class="all">
            <div class="roof">
                <div class="EPSsw">
                    <h2 class="EPS">Energy Power System</h2>
                </div>
                <form class="out" method="post" action="index.html">
                    <input class="input" type="submit" value="sign out" name="sign out" />
                </form>
                <p class="cms">curent model state</p>
            </div>
            <div class="menu">
                <ul>
                	<li><a href="<s:url href="/model_logs" />model logs</a></li>
                	<li><a href="${dipatcher}/history">dispatcher</a></li>
                	<li><a href="${dipatcher}/logs">dispatcher logs</a></li>
                </ul>
            </div>
            <div class="basement">
                <a href="https://github.com/epsm">project on GitHub</a>
            </div>           
            <div class="indicators">
                <p>simulation time: ${simulationState.simulationTimeStamp}</p>
                <p>real time: ${simulationState.realTimeStamp}</p>
                <p>frequency: ${simulationState.frequency}</p>
            </div>
            <table class="user_table">
            	<tr>
                    <th>power stations:</th>
                    <th>consumers:</th>
                </tr>
                <tr>
                    <td>
                    	<div class="over">
                    		<c:forEach var="stationState" items="${powerStationStates}">
								<p>power station#${stationState.powerObjectId}</p>
								<c:forEach var="generatorNumber" items="stationState.generatorsNumbers">
									<p>generator#${generatorNumber} generation: ${generatorState(generatorNumber).generationInWM} MW</p>
								</c:forEach>
								<br>
                        	</c:forEach>
                        </div>
                    </td>
                    <td>
                    	<div class="over">
							<c:forEach var="consumerState" items="${consumersStates}">
								<p>consumer#${powerObjectId}</p>
								<p>load: ${load} MW</p>
	                       		<br>
                        	</c:forEach>
                        </div>
                    </td>
                </tr>                  
            </table>
        </div>
    </body>
</html>
